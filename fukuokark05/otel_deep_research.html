<!DOCTYPE html>

<html lang="ja" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>deep researchã® ãƒ–ãƒ©ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã‚’ OTelã§è¦—ã</title>
    <link rel="stylesheet" type="text/css" href="../_static/revealjs/dist/reveal.css?v=d4488b42" />
    <link rel="stylesheet" href="../_static/revealjs/dist/theme/black.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/revealjs/plugin/highlight/zenburn.css?v=83d5745d" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/common.css?v=b04cc698" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-revealjs/css/footnotes.css?v=c46a0db2" />
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">


    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@ftnext">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://ftnext.github.io/2026-slides/fukuokark05/otel_deep_research.html">
    <meta property="og:title" content="deep researchã®ãƒ–ãƒ©ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã‚’OTelã§è¦—ã">
    <meta property="og:description" content="ç¦å²¡Rubyistä¼šè­°05">
    <meta property="og:image" content="https://ftnext.github.io/2026-slides/_static/ogps/fukuokark05.png">

  </head><body>
    <div class="reveal">
        <div class="slides" role="main">
            <section>
<section>
<h1 style="word-break: keep-all; overflow-wrap: break-word;">deep researchã® ãƒ–ãƒ©ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã‚’ OTelã§è¦—ã</h1>
<dl class="field-list simple">
<dt class="field-odd">Event<span class="colon">:</span></dt>
<dd class="field-odd"><p>ç¦å²¡Rubyistä¼šè­°05</p>
</dd>
<dt class="field-even">Presented<span class="colon">:</span></dt>
<dd class="field-even"><p>2026/02/28 nikkieï¼ˆ<a class="reference external" href="https://github.com/ftnext/2026-slides/tree/main/samplecode/deep-research-otel" rel="noreferrer" target="_blank">ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰</a>ï¼‰</p>
</dd>
</dl>
</section>
</section>
<section>
<section>
<h2 style="word-break: keep-all; overflow-wrap: break-word;">ãŠå‰ã€èª°ã‚ˆï¼ˆPythonä½¿ã„ã®è‡ªå·±ç´¹ä»‹ï¼‰</h2>
<ul class="simple">
<li><p>æ±äº¬åœ¨ä½ã€‚æ©Ÿæ¢°å­¦ç¿’ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢</p></li>
<li><p><a class="reference external" href="https://jp.ub-speeda.com/news/speeda-promotion-gallery/" rel="noreferrer" target="_blank">Speeda AI Agent</a> é–‹ç™ºï¼ˆdeep research æ©Ÿèƒ½å«ã‚€ï¼‰ <a class="footnote-reference brackets" href="#hiring" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a></p></li>
</ul>
<img alt="../_images/uzabase-white-logo.png" src="../_images/uzabase-white-logo.png"/>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="hiring" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a href="#id1" role="doc-backlink">1</a><span class="fn-bracket">]</span></span>
<p><a class="reference external" href="https://hrmos.co/pages/uzabase/jobs/1829077236709650481" rel="noreferrer" target="_blank">We're hiring!</a></p>
</aside>
</aside>
</section>
<section>
<h3 style="word-break: keep-all; overflow-wrap: break-word;">ã‚‚ã†å°‘ã—è‡ªå·±ç´¹ä»‹</h3>
<ul class="simple">
<li><p>ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã‹ã‚‰ <a class="reference external" href="https://github.com/ftnext/llm-deep-research" rel="noreferrer" target="_blank">llm-deep-research</a> <a class="footnote-reference brackets" href="#simonw-llm-plugin" id="id3" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a></p></li>
<li><p><a class="reference external" href="https://www.youtube.com/@lycorptech_jp/search?query=Python%20Meetup" rel="noreferrer" target="_blank">Python Meetup Fukuoka</a> ãŒç†±ãã¦ğŸ”¥ãŸã³ãŸã³å‚åŠ ï¼ˆ<a class="reference external" href="https://lycorptech-fukuoka.connpass.com/event/380867/" rel="noreferrer" target="_blank">æ¬¡å›3/4</a>ï¼‰</p></li>
<li><p>ä»Šå›ã®ç™ºè¡¨ã‚’æ©Ÿã«ã€Rubyã¯5å¹´ä»¥ä¸Šã¶ã‚Šï¼ˆPythonã‚’LLMã§å¤‰æ›ï¼‰</p></li>
</ul>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="simonw-llm-plugin" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a href="#id3" role="doc-backlink">2</a><span class="fn-bracket">]</span></span>
<p>Simon Willisonã•ã‚“ã® <a class="reference external" href="https://pypi.org/project/llm/" rel="noreferrer" target="_blank">llm</a> ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³</p>
</aside>
</aside>
</section>
</section>
<section>
<section>
<h2 style="word-break: keep-all; overflow-wrap: break-word;">ã“ã®ä¸€å¹´ã€ä½•ã‚’ã—ã¦ã„ã¾ã—ãŸã‹ï¼Ÿ</h2>
<ul class="simple">
<li><p>ãƒ†ãƒ¼ãƒï¼š"æœ€è¿‘ã€ä½•ã—ã¦ã‚‹ï¼Ÿ"</p></li>
<li><p><a class="reference external" href="https://regional.rubykaigi.org/fukuoka05/" rel="noreferrer" target="_blank">https://regional.rubykaigi.org/fukuoka05/</a></p></li>
</ul>
</section>
</section>
<section>
<section>
<h2 style="word-break: keep-all; overflow-wrap: break-word;">deep researchğŸ’« <a class="footnote-reference brackets" href="#in-depth-tips" id="id5" role="doc-noteref"><span class="fn-bracket">[</span>3<span class="fn-bracket">]</span></a></h2>
<p>2025/02/02 OpenAI <a class="reference external" href="https://openai.com/index/introducing-deep-research/" rel="noreferrer" target="_blank">Introducing deep research</a></p>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="in-depth-tips" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a href="#id5" role="doc-backlink">3</a><span class="fn-bracket">]</span></span>
<p>in-depth: å¾¹åº•çš„ãª</p>
</aside>
</aside>
</section>
<section>
<h3 style="word-break: keep-all; overflow-wrap: break-word;">çš†ã•ã‚“ä½¿ã£ã¦ã¾ã™ã‹ï¼ŸğŸ™‹</h3>
<ul class="simple">
<li><p>GPT (OpenAI)</p></li>
<li><p><a class="reference external" href="https://gemini.google/overview/deep-research/" rel="noreferrer" target="_blank">Gemini</a> ãƒ» <a class="reference external" href="https://claude.com/blog/research" rel="noreferrer" target="_blank">Claude</a> ãªã©ãªã© <a class="footnote-reference brackets" href="#deep-research-services" id="id7" role="doc-noteref"><span class="fn-bracket">[</span>4<span class="fn-bracket">]</span></a></p></li>
<li><p>å…¬é–‹å®Ÿè£…ã‚’å‹•ã‹ã—ãŸ</p></li>
<li><p>è‡ªä½œã—ã¦ã„ã‚‹</p></li>
</ul>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="deep-research-services" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a href="#id7" role="doc-backlink">4</a><span class="fn-bracket">]</span></span>
<p>X (<a class="reference external" href="https://x.ai/news/grok-3" rel="noreferrer" target="_blank">Grok</a>)ãƒ» <a class="reference external" href="https://www.perplexity.ai/ja/hub/blog/introducing-perplexity-deep-research" rel="noreferrer" target="_blank">Perplexity</a> ãªã©ãªã©</p>
</aside>
</aside>
</section>
<section>
<h3 style="word-break: keep-all; overflow-wrap: break-word;">OpenAI deep research</h3>
<img alt="../_images/openai-deep-research-example.png" src="../_images/openai-deep-research-example.png"/>
</section>
<section>
<ol class="arabic simple">
<li><p>äººé–“ãŒèª¿æŸ»ã‚’ä¾é ¼</p></li>
<li><p>LLMã‹ã‚‰è¿½åŠ ã§è³ªå• <a class="footnote-reference brackets" href="#deep-research-update" id="id8" role="doc-noteref"><span class="fn-bracket">[</span>5<span class="fn-bracket">]</span></a></p></li>
<li><p>äººé–“ã‹ã‚‰å›ç­”</p></li>
<li><p><strong>LLMãŒWebã‚’èª¿æŸ»</strong> ï¼ˆ10åˆ†ç¨‹åº¦ï¼‰</p></li>
<li><p>è©³ç´°ãªãƒ¬ãƒãƒ¼ãƒˆ</p></li>
</ol>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="deep-research-update" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a href="#id8" role="doc-backlink">5</a><span class="fn-bracket">]</span></span>
<p>2026/02ã«ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆãŒå…¥ã‚Šã¾ã—ãŸï¼ˆ<a class="reference external" href="https://help.openai.com/en/articles/10500283-deep-research-in-chatgpt" rel="noreferrer" target="_blank">Deep research in ChatGPT</a>ï¼‰</p>
</aside>
</aside>
</section>
<section>
<h3 style="word-break: keep-all; overflow-wrap: break-word;">ç§ã® <strong>ä»£ã‚ã‚Šã«Webã‚’èª¿æŸ»</strong> ã—ã¦ãã¦ãã‚Œã‚‹ï¼</h3>
<ul class="simple">
<li><p>èª¿æŸ»è¨ˆç”»</p></li>
<li><p>Webæ¤œç´¢ <a class="footnote-reference brackets" href="#deep-research-supplement" id="id9" role="doc-noteref"><span class="fn-bracket">[</span>6<span class="fn-bracket">]</span></a></p></li>
<li><p>Webãƒ–ãƒ©ã‚¦ã‚¸ãƒ³ã‚°</p></li>
</ul>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="deep-research-supplement" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a href="#id9" role="doc-backlink">6</a><span class="fn-bracket">]</span></span>
<p>æ‰‹å…ƒã®ãƒ•ã‚¡ã‚¤ãƒ«æŒ‡å®šã‚‚å¯</p>
</aside>
</aside>
</section>
<section>
<h3 style="word-break: keep-all; overflow-wrap: break-word;">LLMã« <strong>é“å…·ã‚’æ¸¡ã—ã¦</strong> å†ç¾ã•ã›ã‚ˆã†ï¼</h3>
<ul class="simple">
<li><p>OpenAIã¯ <em>å°‚ç”¨ãƒ¢ãƒ‡ãƒ«</em> ã§å®Ÿç¾ <a class="footnote-reference brackets" href="#deep-research-model" id="id10" role="doc-noteref"><span class="fn-bracket">[</span>7<span class="fn-bracket">]</span></a></p></li>
<li><p>GPTã®ã‚ˆã†ãªè¦æ¨¡ã®ãƒ¢ãƒ‡ãƒ«ã¯é–‹ç™ºã§ããšã¨ã‚‚</p></li>
<li><p>LLMã¯é“å…·ãŒä½¿ãˆã‚‹ï¼ˆtool use = function callingï¼‰</p></li>
</ul>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="deep-research-model" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a href="#id10" role="doc-backlink">7</a><span class="fn-bracket">]</span></span>
<p>ã€Œ<em>The deep research model is powered by an early version of OpenAI o3 that is optimized for web browsing.</em>ã€ <a class="reference external" href="https://openai.com/index/deep-research-system-card/" rel="noreferrer" target="_blank">Deep Research System Card</a></p>
</aside>
</aside>
</section>
<section>
<iframe allowfullscreen="true" class="speakerdeck-iframe" data-ratio="1.7777777777777777" frameborder="0" src="https://speakerdeck.com/player/f912a0d061334d5aaf2fbf09ace3888c?slide=11" style="border: 0px; background: rgba(0, 0, 0, 0.1) padding-box; margin: 0px; padding: 0px; border-radius: 6px; box-shadow: rgba(0, 0, 0, 0.2) 0px 5px 40px; width: 100%; height: auto; aspect-ratio: 560 / 315;" title="AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¨ã¯ï¼ˆUB Tech vol.21ï¼‰"></iframe></section>
<section>
<ol class="arabic simple">
<li><p>LLMã«ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã¨toolä¸€è¦§ã‚’é€ã‚‹</p></li>
<li><p>LLMã€Œã“ã®toolã‚’ã“ã‚Œã“ã‚Œã®å¼•æ•°ã§å‘¼ã³å‡ºã—ãŸã„ã€ï¼ˆJSONï¼‰ <a class="footnote-reference brackets" href="#mcp-tools" id="id11" role="doc-noteref"><span class="fn-bracket">[</span>8<span class="fn-bracket">]</span></a></p></li>
<li><p><strong>ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§toolã‚’å‘¼ã³å‡ºã—ã€çµæœã‚’LLMã«è¿”ã™</strong></p></li>
<li><p>LLMãŒtoolã®çµæœã‚’å…ƒã«ï¼ˆå¿…è¦ã§ã‚ã‚Œã°ã•ã‚‰ã«toolå‘¼ã³å‡ºã—ï¼‰å›ç­”</p></li>
</ol>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="mcp-tools" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a href="#id11" role="doc-backlink">8</a><span class="fn-bracket">]</span></span>
<p>MCPï¼ˆModel Control Protocolï¼‰ã¯toolå‘¼ã³å‡ºã—ã‚’çµ±ä¸€ã™ã‚‹ã‚‚ã®ã§ã—ãŸ</p>
</aside>
</aside>
</section>
</section>
<section>
<section>
<h2 style="word-break: keep-all; overflow-wrap: break-word;"><a class="reference external" href="https://huggingface.co/blog/open-deep-research" rel="noreferrer" target="_blank">Open-source DeepResearch</a></h2>
<ul>
<li><p>OpenAIã®ç™ºè¡¨ã‚’å—ã‘ã¦ã€Hugging FaceãŒ24æ™‚é–“å†ç¾ãƒãƒ£ãƒ¬ãƒ³ã‚¸</p></li>
<li><p><a class="reference external" href="https://github.com/huggingface/smolagents/tree/main/examples/open_deep_research" rel="noreferrer" target="_blank">https://github.com/huggingface/smolagents/tree/main/examples/open_deep_research</a></p>
<blockquote>
<div><p>This agent achieves <strong>55% pass@1</strong> on the GAIA <a class="footnote-reference brackets" href="#gaia-paper" id="id13" role="doc-noteref"><span class="fn-bracket">[</span>9<span class="fn-bracket">]</span></a> validation set, compared to <strong>67%</strong> for the original Deep Research.</p>
</div></blockquote>
</li>
</ul>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="gaia-paper" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a href="#id13" role="doc-backlink">9</a><span class="fn-bracket">]</span></span>
<p><a class="reference external" href="https://arxiv.org/abs/2311.12983" rel="noreferrer" target="_blank">[2311.12983] GAIA: a benchmark for General AI Assistants</a></p>
</aside>
</aside>
</section>
<section>
<h3 style="word-break: keep-all; overflow-wrap: break-word;">Hugging Faceè£½deep researchã®å·¥å¤«</h3>
<ul class="simple">
<li><p>ãƒ†ã‚­ã‚¹ãƒˆãƒ–ãƒ©ã‚¦ã‚¶ï¼ˆ<em>an extremely simple text-based web browser</em>ï¼‰</p></li>
<li><p><em>CodeAct</em> <a class="footnote-reference brackets" href="#codeact-paper" id="id14" role="doc-noteref"><span class="fn-bracket">[</span>10<span class="fn-bracket">]</span></a> ï¼šè¨ˆç”»ã‚’ã‚³ãƒ¼ãƒ‰ï¼ˆPythonï¼‰ã§è¡¨ç¾</p></li>
</ul>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="codeact-paper" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a href="#id14" role="doc-backlink">10</a><span class="fn-bracket">]</span></span>
<p><a class="reference external" href="https://arxiv.org/abs/2402.01030" rel="noreferrer" target="_blank">[2402.01030] Executable Code Actions Elicit Better LLM Agents</a></p>
</aside>
</aside>
</section>
<section>
<h3 style="word-break: keep-all; overflow-wrap: break-word;">ä¾‹ãˆã°ã€ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã«ã¯ã ã„ãŸã„å…¬é–‹å®Ÿè£…ã‚ã‚Š</h3>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pydantic/pydantic-ai/blob/main/examples/pydantic_ai_examples/flight_booking.py" rel="noreferrer" target="_blank">Pydantic AI</a></p></li>
<li><p><a class="reference external" href="https://github.com/google/adk-samples/tree/main/python/agents/deep-search" rel="noreferrer" target="_blank">Agent Development Kit</a> (Google)</p></li>
<li><p><a class="reference external" href="https://github.com/strands-agents/samples/tree/main/02-samples/14-research-agent" rel="noreferrer" target="_blank">Strands Agents</a> (AWS)</p></li>
<li><p><a class="reference external" href="https://github.com/microsoft/agent-framework/tree/main/python/samples/02-agents" rel="noreferrer" target="_blank">Agent Framework</a> (Microsoft)</p></li>
</ul>
</section>
<section>
<h3 style="word-break: keep-all; overflow-wrap: break-word;">ç§ã¯å·¥å¤«ã‚’çŸ¥ã‚ŠãŸã„</h3>
<ul class="simple">
<li><p>è‡ªä½œã®å‚è€ƒã«ã™ã‚‹ãŸã‚ã«å…¬é–‹å®Ÿè£…ã‚’å‹•ã‹ã™</p></li>
<li><p>ä½œè€…ã§ã¯ãªã„ã®ã§ã€å†…éƒ¨ã®å‹•ããŒæ‰‹ã«å–ã‚‹ã‚ˆã†ã«ã¯ã‚ã‹ã‚‰ãªã„ï¼ˆ<strong>ãƒ–ãƒ©ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹</strong>ï¼‰</p></li>
</ul>
</section>
<section>
<h3 style="word-break: keep-all; overflow-wrap: break-word;">LLMã¸ã®å…¥åŠ›ã‚’å…¨éƒ¨åˆ†ã‹ã‚ŠãŸã„ï¼ˆæŸç¸›ç³»ï¼‰</h3>
<ul class="simple">
<li><p>LLMã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºã«ãŠã‘ã‚‹ç§ã®ä¿¡å¿µ</p></li>
<li><p>deep researchã‚’ä¾é ¼ã•ã‚ŒãŸ <strong>LLMã®ã‚ˆã†ã«è€ƒãˆã‚‹</strong> <a class="footnote-reference brackets" href="#think-like-agents" id="id18" role="doc-noteref"><span class="fn-bracket">[</span>11<span class="fn-bracket">]</span></a></p></li>
<li><p>æ”¹å–„æ¡ˆã‚’å‡ºã—ã‚„ã™ã„ï¼ˆLLMã‚ˆã‚Šå‰ã¯æ•°å­¦ã®ç†è§£ãŒå¿…è¦ã ã£ãŸï¼‰</p></li>
</ul>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="think-like-agents" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a href="#id18" role="doc-backlink">11</a><span class="fn-bracket">]</span></span>
<p>ã€Œ<em>Think like your agents</em>ã€ Anthropic <a class="reference external" href="https://www.anthropic.com/engineering/built-multi-agent-research-system" rel="noreferrer" target="_blank">How we built our multi-agent research system</a></p>
</aside>
</aside>
</section>
</section>
<section>
<section>
<h2 style="word-break: keep-all; overflow-wrap: break-word;"><strong>OpenTelemetry</strong> (OTel) ã«ç›®ã‚’ã¤ã‘ãŸï¼</h2>
<ul>
<li><p>ãƒ†ãƒ¬ãƒ¡ãƒˆãƒªï¼ˆãƒˆãƒ¬ãƒ¼ã‚¹ãƒ»ãƒ¡ãƒˆãƒªã‚¯ã‚¹ãƒ»ãƒ­ã‚°ï¼‰ã‹ã‚‰ <strong>å¯è¦³æ¸¬æ€§</strong> ã‚’å¾—ã‚‹æ‰‹æ®µ</p>
<blockquote>
<div><ul class="simple">
<li><p>ã‚·ã‚¹ãƒ†ãƒ ã®å‡ºåŠ›ã‹ã‚‰å†…éƒ¨çŠ¶æ…‹ã‚’ç†è§£ã™ã‚‹</p></li>
</ul>
</div></blockquote>
</li>
<li><p>ãƒ™ãƒ³ãƒ€ãƒ¼ã‚„ãƒ„ãƒ¼ãƒ«ã®ãƒ­ãƒƒã‚¯ã‚¤ãƒ³ãªã—</p></li>
</ul>
</section>
<section>
<h3 style="word-break: keep-all; overflow-wrap: break-word;">ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆä¼æ’­ğŸƒâ€â™‚ï¸ <a class="footnote-reference brackets" href="#otel-context-propagation" id="id19" role="doc-noteref"><span class="fn-bracket">[</span>12<span class="fn-bracket">]</span></a></h3>
<img alt="../_images/otel-docs-context-propagation-example.svg" src="../_images/otel-docs-context-propagation-example.svg"/>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="otel-context-propagation" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a href="#id19" role="doc-backlink">12</a><span class="fn-bracket">]</span></span>
<p>å›³ã¯ <a class="reference external" href="https://opentelemetry.io/ja/docs/concepts/context-propagation/#traces" rel="noreferrer" target="_blank">https://opentelemetry.io/ja/docs/concepts/context-propagation/#traces</a> ã‚ˆã‚Šï¼ˆãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã§åˆ†æ•£ãƒˆãƒ¬ãƒ¼ã‚·ãƒ³ã‚°ï¼‰</p>
</aside>
</aside>
</section>
<section>
<h3 style="word-break: keep-all; overflow-wrap: break-word;">ãƒˆãƒ¬ãƒ¼ã‚¹ä¾‹ğŸƒâ€â™‚ï¸</h3>
<pre data-id="id21"><code class="json" data-noescape="" data-trim="">{
    "name": "GET /",
    "context": {
        "trace_id": "0x9591b67e3eb9f91ecadc84aec50e79f0",
        "span_id": "0x9bf997b809109fa3",
        "trace_state": "[]"
    },
    "kind": "SpanKind.SERVER",
    "parent_id": "0x119f828276ebd665",
    "start_time": "2026-02-27T10:57:22.142571Z",
    "end_time": "2026-02-27T10:57:22.143700Z",
    "status": {
        "status_code": "UNSET"
    },
    "attributes": {
        "http.scheme": "http",
        "http.host": "127.0.0.1:8000",
        "net.host.port": 8000,
        "http.flavor": "1.1",
        "http.target": "/",
        "http.url": "http://127.0.0.1:8000/",
        "http.method": "GET",
        "http.server_name": "localhost:8000",
        "http.user_agent": "Faraday v2.14.1",
        "net.peer.ip": "127.0.0.1",
        "net.peer.port": 62375,
        "http.route": "/",
        "http.status_code": 200
    },
    "events": [],
    "links": [],
    "resource": {
        "attributes": {
            "telemetry.sdk.language": "python",
            "telemetry.sdk.name": "opentelemetry",
            "telemetry.sdk.version": "1.35.0",
            "service.name": "unknown_service"
        },
        "schema_url": ""
    }
}</code></pre>
</section>
<section>
<h3 style="word-break: keep-all; overflow-wrap: break-word;">ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åï¼šSemantic conventionsğŸƒâ€â™‚ï¸</h3>
<ul>
<li><p><a class="reference external" href="https://opentelemetry.io/docs/specs/semconv/" rel="noreferrer" target="_blank">https://opentelemetry.io/docs/specs/semconv/</a></p></li>
<li><p>LLMã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å‘ã‘ã®ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯è¦ç´„ç­–å®šãŒ <strong>ç¾åœ¨é€²è¡Œç³»</strong> ğŸ”¥</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference external" href="https://opentelemetry.io/docs/specs/semconv/gen-ai/" rel="noreferrer" target="_blank">https://opentelemetry.io/docs/specs/semconv/gen-ai/</a></p></li>
</ul>
</div></blockquote>
</li>
</ul>
</section>
<section>
<h3 style="word-break: keep-all; overflow-wrap: break-word;">ä¾‹ãˆã° Gemini</h3>
<ul class="simple">
<li><p>Pythonã§ã¯ <a class="reference external" href="https://pypi.org/project/google-genai/" rel="noreferrer" target="_blank">google-genai</a> SDK</p></li>
<li><p><a class="reference external" href="https://pypi.org/project/opentelemetry-instrumentation-google-genai/" rel="noreferrer" target="_blank">opentelemetry-instrumentation-google-genai</a> ã§ <em>è¨ˆè£…</em> ã‚’æä¾›</p></li>
<li><p>ç„¡æ–™ã€‚ãŸã ã—ã€å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã¯Googleã®ãƒ¢ãƒ‡ãƒ«ã®è¨“ç·´ã«ä½¿ã‚ã‚Œã‚‹ <a class="footnote-reference brackets" href="#google-gemini-api" id="id22" role="doc-noteref"><span class="fn-bracket">[</span>13<span class="fn-bracket">]</span></a></p></li>
</ul>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="google-gemini-api" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a href="#id22" role="doc-backlink">13</a><span class="fn-bracket">]</span></span>
<p>DeepMindã«ã‚ˆã‚‹Gemini APIãŒç„¡æ–™ã€‚æœ¬ç•ªåˆ©ç”¨å‘ã‘ã«Google Cloudã®Vertex AIã‚‚ã‚ã‚Šã¾ã™</p>
</aside>
</aside>
</section>
<section>
<h3 style="word-break: keep-all; overflow-wrap: break-word;">æ‚©ã¾ã•ã‚Œã¦ã„ãŸãƒ–ãƒ©ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ğŸ“¦</h3>
<pre data-id="id23"><code class="python" data-noescape="" data-trim="">from deep_research_lib import ResearchAgent  # Geminiã‚’ä½¿ã£ãŸdeep research

result = ResearchAgent().run(query)</code></pre>
</section>
<section>
<h3 style="word-break: keep-all; overflow-wrap: break-word;">google-genaiã‚’è¨ˆè£…ï¼ˆç°¡ç•¥ç‰ˆï¼‰ğŸˆ³ <a class="footnote-reference brackets" href="#research-python-impl" id="id24" role="doc-noteref"><span class="fn-bracket">[</span>14<span class="fn-bracket">]</span></a></h3>
<pre data-id="google-genai"><code class="python" data-line-numbers="2,4" data-noescape="" data-trim="">from deep_research_lib import ResearchAgent
from opentelemetry.instrumentation.google_genai import GoogleGenAiSdkInstrumentor

GoogleGenAiSdkInstrumentor().instrument()
result = ResearchAgent().run(query)</code></pre>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="research-python-impl" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a href="#id24" role="doc-backlink">14</a><span class="fn-bracket">]</span></span>
<p><a class="reference external" href="https://github.com/ftnext/2026-slides/tree/main/samplecode/deep-research-otel/python" rel="noreferrer" target="_blank">https://github.com/ftnext/2026-slides/tree/main/samplecode/deep-research-otel/python</a> ï¼ˆ<code class="docutils literal notranslate"><span class="pre">uvx</span> <span class="pre">--with</span> <span class="pre">llm-deep-research</span> <span class="pre">llm</span> <span class="pre">-m</span> <span class="pre">genai-processors-research</span> <span class="pre">QUERY</span></code> ã‚‚æä¾›ã—ã¦ã¾ã™ï¼‰</p>
</aside>
</aside>
</section>
</section>
<section>
<section>
<h2 style="word-break: keep-all; overflow-wrap: break-word;">å›ç­”ï¼šã“ã®ä¸€å¹´ã€ä½•ã‚’ã—ã¦ã„ã¾ã—ãŸã‹ï¼Ÿ</h2>
<ul class="simple">
<li><p>deep researchã®å®Ÿè£…ã‚’è¦‹ã¤ã‘ã‚‹</p></li>
<li><p><strong>OpenTelemetryã‚’æœ‰åŠ¹ã«ã—ã¦å‹•ã‹ã™</strong> ï¼ˆé‘‘è³ï¼‰</p></li>
<li><p>æ°—ã«ãªã‚‹ç®‡æ‰€ã®ã‚½ãƒ¼ã‚¹ã‚’èª­ã¿ç†è§£æ·±ã‚ã‚‹ï¼ˆè‡ªåˆ†ã®å®Ÿè£…ã«æ´»ã‹ã™ï¼‰</p></li>
</ul>
</section>
</section>
<section>
<section>
<h2 style="word-break: keep-all; overflow-wrap: break-word;">ã“ã‚Œã‚’ <strong>Ruby</strong> ã§ã‚„ã‚‹ã“ã¨ã‚’è€ƒãˆã¾ã™</h2>
<p><a class="reference external" href="https://github.com/ftnext/2026-slides/tree/main/samplecode/deep-research-otel" rel="noreferrer" target="_blank">https://github.com/ftnext/2026-slides/tree/main/samplecode/deep-research-otel</a></p>
</section>
<section>
<h3 style="word-break: keep-all; overflow-wrap: break-word;">ä»Šå›ã®deep research <a class="footnote-reference brackets" href="#genai-processors-research" id="id26" role="doc-noteref"><span class="fn-bracket">[</span>15<span class="fn-bracket">]</span></a></h3>
<ol class="arabic simple">
<li><p>topic_generator</p></li>
<li><p>topic_researcher</p></li>
<li><p>research_synthesizer</p></li>
</ol>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="genai-processors-research" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a href="#id26" role="doc-backlink">15</a><span class="fn-bracket">]</span></span>
<p>Googleã® <a class="reference external" href="https://pypi.org/project/genai-processors/" rel="noreferrer" target="_blank">genai-processors</a> ã® <a class="reference external" href="https://github.com/google-gemini/genai-processors/tree/main/examples/research" rel="noreferrer" target="_blank">Research Agent Example</a> ï¼ˆWebæ¤œç´¢ã®ã¿ã§ãƒ–ãƒ©ã‚¦ã‚¸ãƒ³ã‚°ãŒãªã„ã¨ã“ã‚ãŒä¼¸ã³ã—ã‚ï¼‰</p>
</aside>
</aside>
</section>
<section>
<a class="reference internal image-reference" href="../_images/genai-processor-research.drawio.png"><img alt="../_images/genai-processor-research.drawio.png" height="582" src="../_images/genai-processor-research.drawio.png" width="722"/>
</a>
</section>
<section>
<h3 style="word-break: keep-all; overflow-wrap: break-word;">Gemini APIã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã«Faraday</h3>
<pre data-id="gemini-apifaraday"><code class="ruby" data-noescape="" data-trim="">conn = Faraday.new(
  url: "https://generativelanguage.googleapis.com"
)
response = conn.post(
  "/v1beta/models/gemini-3-flash-preview:generateContent"
) do |req|
  req.headers["Content-type"] = "application/json"
  req.headers["x-goog-api-key"] = api_key
  req.body = {
    contents: [
      {
        parts: [
          { text: "What's a good name for a flower shop that specializes in selling bouquets of dried flowers?" }
        ]
      }
    ]
  }.to_json
end</code></pre>
</section>
<section>
<h3 style="word-break: keep-all; overflow-wrap: break-word;">opentelemetry-instrumentation-faraday</h3>
<pre data-id="opentelemetry-instrumentation-faraday"><code class="ruby" data-noescape="" data-trim="">ENV["OTEL_TRACES_EXPORTER"] = "console"
OpenTelemetry::SDK.configure do |c|
  c.use 'OpenTelemetry::Instrumentation::Faraday'
end</code></pre>
</section>
<section>
<h3 style="word-break: keep-all; overflow-wrap: break-word;">é™ç•Œï¼šGemini APIã¸ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒä¸æ˜</h3>
<div class="literal-block-wrapper docutils container" id="id37">
<div class="code-block-caption"><span class="caption-text">ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£ã¯è¨˜éŒ²ã•ã‚Œãªã„</span></div>
<pre><code class="ruby" data-noescape="" data-trim="">ENV["OTEL_TRACES_EXPORTER"] = "console"
OpenTelemetry::SDK.configure do |c|
  c.use 'OpenTelemetry::Instrumentation::Faraday'
end

agent = ResearchAgent.new(api_key: api_key, config: config)
result = agent.run(USER_QUERY)</code></pre>
</div>
</section>
<section>
<h3 style="word-break: keep-all; overflow-wrap: break-word;">Workaround: faradayã®Middlewareï¼ˆã‚¤ãƒ¡ãƒ¼ã‚¸ï¼‰</h3>
<pre data-id="workaround-faradaymiddleware"><code class="ruby" data-noescape="" data-trim="">class OtelBodyCaptureMiddleware &lt; Faraday::Middleware
  def call(env)
    # è©³ã—ãã¯æ¬¡ã‚¹ãƒ©ã‚¤ãƒ‰
    # span.set_attribute("http.request.body", body_str)
  end
end

agent = ResearchAgent.new(api_key: api_key, config: config) do |conn|
  conn.builder.insert_after(
    OpenTelemetry::Instrumentation::Faraday::Middlewares::Old::TracerMiddleware,
    OtelBodyCaptureMiddleware
  )
end</code></pre>
</section>
<section>
<pre data-id="workaround-faradaymiddleware"><code class="ruby" data-noescape="" data-trim="">class OtelBodyCaptureMiddleware &lt; Faraday::Middleware
  def call(env)
    span = OpenTelemetry::Trace.current_span
    if span&amp;.recording?
      body = env.body
      body_str = body.is_a?(String) ? body : JSON.generate(body)
      span.set_attribute("http.request.body", body_str)
    end

    response = @app.call(env)

    if span&amp;.recording?
      span.set_attribute("http.response.body", response.body.to_s)
    end
    response
  end
end</code></pre>
</section>
</section>
<section>
<section>
<h2 style="word-break: keep-all; overflow-wrap: break-word;">google-genaiã‚’è¨ˆè£…ã™ã‚‹ã®ã¨åŒã˜ä½“é¨“ã‚’ã—ãŸã„ï¼</h2>
<pre data-id="id28"><code class="python" data-line-numbers="2,4" data-noescape="" data-trim="">from deep_research_lib import ResearchAgent
from opentelemetry.instrumentation.google_genai import GoogleGenAiSdkInstrumentor

GoogleGenAiSdkInstrumentor().instrument()
result = ResearchAgent().run(query)</code></pre>
</section>
<section>
<h3 style="word-break: keep-all; overflow-wrap: break-word;">ã‚¹ã‚³ãƒ¼ãƒ—ã‚’çµã£ã¦è‡ªä½œ</h3>
<pre data-id="id29"><code class="ruby" data-noescape="" data-trim="">require_relative './deep_research_lib'
require_relative './instrumentor'

MyGoogleGenai::Instrumentation::Instrumentor.new.instrument
result = ResearchAgent.new(api_key: api_key, config: config).run(USER_QUERY)</code></pre>
<p><a class="reference external" href="https://github.com/ftnext/2026-slides/tree/main/samplecode/deep-research-otel/ruby-v2" rel="noreferrer" target="_blank">https://github.com/ftnext/2026-slides/tree/main/samplecode/deep-research-otel/ruby-v2</a></p>
</section>
<section>
<h3 style="word-break: keep-all; overflow-wrap: break-word;">LLMã¸ã®å…¥åŠ›ã€å…¨éƒ¨åˆ†ã‹ã‚‹ï¼ğŸ™Œ</h3>
<pre data-id="id30"><code class="txt" data-noescape="" data-trim="">events=
 [#&lt;struct OpenTelemetry::SDK::Trace::Event
   name="gen_ai.user.message",
   attributes=
    {"content" =&gt;
      "You are an expert at generating topics for research, based on the user's content.\n" +
      "\n" +
      "Your first task is to devise a number of concrete research areas needed to address the user's content.\n" +
      "\n" +</code></pre>
</section>
</section>
<section>
<section>
<h2 style="word-break: keep-all; overflow-wrap: break-word;">æœ€å¾Œã«ï¼šdeep researchã‚’ä½œã£ã¦ã¿ãŸããªã£ãŸæ–¹ã¸</h2>
<ul class="simple">
<li><p>è‡ªä½œä»¥å¤–ã«ï¼šGoogleã¯ <a class="reference external" href="https://ai.google.dev/gemini-api/docs/interactions?hl=ja" rel="noreferrer" target="_blank">interactions API</a> ã¨ã—ã¦deep researchã‚’æä¾›ã—ã¦ã„ã¾ã™</p></li>
<li><p>è‡ªä½œã™ã‚‹å ´åˆï¼šã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ãƒãƒ¼ãƒã‚¹ã‚’ä½¿ã†ï¼ˆ<a class="reference external" href="https://pypi.org/project/claude-agent-sdk/" rel="noreferrer" target="_blank">Claude Agent SDK</a> ãªã©ï¼‰ <a class="footnote-reference brackets" href="#claude-code-oneliner-research" id="id32" role="doc-noteref"><span class="fn-bracket">[</span>16<span class="fn-bracket">]</span></a></p></li>
</ul>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="claude-code-oneliner-research" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a href="#id32" role="doc-backlink">16</a><span class="fn-bracket">]</span></span>
<p><a class="reference external" href="https://platform.claude.com/cookbook/claude-agent-sdk-00-the-one-liner-research-agent" rel="noreferrer" target="_blank">The one-liner research agent</a></p>
</aside>
</aside>
</section>
<section>
<h3 style="word-break: keep-all; overflow-wrap: break-word;">ã”æ¸…è´ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸ</h3>
<p>deep research ã®ãƒ–ãƒ©ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã‚’ OTel ã§è¦—ã</p>
</section>
</section>
<section>
<section>
<h2 style="word-break: keep-all; overflow-wrap: break-word;">Appendix</h2>
</section>
<section>
<h3 style="word-break: keep-all; overflow-wrap: break-word;">ãªãœGeminiï¼Ÿ</h3>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/anthropics/anthropic-sdk-ruby" rel="noreferrer" target="_blank">anthropic-sdk-ruby</a> ã¨ <a class="reference external" href="https://github.com/open-telemetry/opentelemetry-ruby-contrib/tree/main/instrumentation/anthropic" rel="noreferrer" target="_blank">opentelemetry-instrumentation-anthropic</a> ã‚’çŸ¥ã£ãŸ</p></li>
<li><p>Pythonã®google-genaiã¨ãã®è¨ˆè£…ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ã®é–¢ä¿‚ã¨ã¯ã©ã†ã‚„ã‚‰é•ã†ã‚ˆã† <a class="footnote-reference brackets" href="#anthropic-sdk-ruby-practice" id="id35" role="doc-noteref"><span class="fn-bracket">[</span>17<span class="fn-bracket">]</span></a></p></li>
<li><p>ç„¡æ–™ã§ä½¿ãˆã‚‹Geminiï¼ˆå…¥åŠ›ã¯å­¦ç¿’åˆ©ç”¨ã•ã‚Œã‚‹ç‚¹ã«ã¯æ³¨æ„ï¼‰</p></li>
</ul>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="anthropic-sdk-ruby-practice" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a href="#id35" role="doc-backlink">17</a><span class="fn-bracket">]</span></span>
<p><a class="reference external" href="https://github.com/ftnext/2026-slides/tree/main/samplecode/deep-research-otel/claude" rel="noreferrer" target="_blank">https://github.com/ftnext/2026-slides/tree/main/samplecode/deep-research-otel/claude</a></p>
</aside>
</aside>
</section>
<section>
<h3 style="word-break: keep-all; overflow-wrap: break-word;">æ¤œç´¢ãƒ„ãƒ¼ãƒ«ã®å‘¼ã³å‡ºã—</h3>
<ul class="simple">
<li><p>Geminiã«Googleæ¤œç´¢ã•ã›ã‚‹ç®‡æ‰€</p></li>
<li><p>ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ã§ãªã <strong>ã‚µãƒ¼ãƒã‚µã‚¤ãƒ‰</strong></p></li>
<li><p>GeminiãŒã‚µãƒ¼ãƒã‚µã‚¤ãƒ‰ã§æ¤œç´¢ã—ã¦ã€ãã®çµæœã‚’å…ƒã«è¿”ç­”ã—ã¦ã„ã¾ã™</p></li>
</ul>
</section>
</section>
<section>
<section>
<h2 style="word-break: keep-all; overflow-wrap: break-word;">EOF</h2>
</section>
</section>
        </div>
    </div>
    
    <script src="../_static/revealjs/dist/reveal.js"></script>
    
    
      <script src="../_static/revealjs/plugin/highlight/highlight.js"></script>
      <script src="../_static/revealjs/plugin/notes/notes.js"></script>
      <script src="../_static/revealjs/plugin/copycode/copycode.js"></script>
      
    
    <script>
        var revealjsConfig = new Object();
        Object.assign(revealjsConfig, {"controls": true, "progress": true, "history": true, "center": true, "transition": "none", "slideNumber": "c/t", "scrollActivationWidth": null});
        
        
        
          revealjsConfig.plugins = [
            RevealHighlight,RevealNotes,CopyCode,
          ];
        
        // More info https://github.com/hakimel/reveal.js#configuration
        Reveal.initialize(revealjsConfig);
    </script>

  </body>
</html>